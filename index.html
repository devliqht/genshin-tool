<html>
    <head>
        <title>Genshin Damage Calculator</title>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/padding.css">
        <link rel="stylesheet" href="css/bootstrap-checkbox.css">
        <style>

        </style>
        <script src="js/formula.js"></script>
        <script src="js/switches.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    </head>

    <body style="background-color: #131212;">
        <div class="accept-page-wrapper" style="opacity: 0%; animation: opacityIncrease 1s forwards; z-index: 50;" id="accept-page">
            <div class="accept-page">
                <div class="accept-page-container-wrapper">
                    <div class="accept-page-container" style="text-align: center; padding: 10px;">
                        <div class="accept-button-wrapper">
                            <div class="accept-button-container">
                                <h3 style="color: #1d1d1d;">This tool is for calculating your total damage in Genshin Impact.</h3>
                                <p style="color: #1d1d1d;">It uses KeqingMain's damage formula, found <a style="color: #4f4f75;"href="https://library.keqingmains.com/mechanics/combat/damage-formula">here</a>.</p>
                                <div class="accept-button">
                                    <button class="btn btn-outline-secondary" type="button" id="button-addon2" onclick="playCalculator();">I understand and accept.</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="accept-page-wrapper" style="visibility: hidden; z-index: 100;" id="video-wrapper">
            <div class="accept-page">
                <div class="accept-page-container-wrapper">
                    <div class="vid-page-container" style="text-align: center; padding: 10px;">
                        <div class="accept-button-wrapper">
                            <div class="accept-button-container">
                                <h3 style="color: #1d1d1d">You got tartaglia'd.</h3>
                                <p style="color: #1d1d1d">You have no control over this. Good luck!</p>
                                <video id="childe-vid" loop>
                                    <source src="vid/TARTAGLIA.mp4" type="video/mp4">
                                    Your browser does not support HTML5 video.
                                  </video>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="blur" style="filter: blur(12px); -webkit-filter: blur(12px);">
        <div class="main-page-wrapper">
            <div class="main-page-subwrap">
                <div class="info-page">
                    <div class="total-damage-pc" style="background: #1d1d1d; padding: 10px; margin: 10px;">
                        <h3 style="margin: 10px; text-align: center;">Total Damage:</h3>
                        <h1 style="margin: 10px; text-align: center;"><span id="total-damage"></span></h1>
                        <h6 style="text-align: center; color: #9292d3;">Made by Liqht#8961</h6>
                        <h6 style="text-align: center;">To get the highest possible damage, snapshot your stats when you execute your usual team combo. This calculator is not <strong>100% accurate</strong>, damage may be off by a few hundreds.</h6>
                    </div>
                    <div class="padding-sm"></div>
                    <div class="calc-section">
                        <h5 style="text-align: center;">What is base ATK / Added ATK?</h5>
                    </div>
                    <div class="img-holder">
                        <img src="assets/atk.PNG">
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;">The <strong>white text</strong> is the base ATK. The <strong>green text</strong> is the the added ATK.</p>
                    <div class="calc-section">
                        <h5 style="text-align: center;">Why is world level and character level needed?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;">To get the most accurate results for your damage,  we must also take into account the enemy's DEF and RES. Both of which scales with the enemy's lvl and your current active character's lvl.</p>
                    <div class="calc-section">
                        <h5 style="text-align: center;">What is reaction bonus?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;"><strong>Reaction bonus</strong> are percentage bonuses of Elemental Reactions from pieces such as 4 PC Thundering Fury, 4 PC Crimson Witch, 4 VV etc.</p>

                    <div class="calc-section">
                        <h5 style="text-align: center;">What is RES / DEF reduction?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;"><strong>RES/DEF reduction</strong> refers to bonuses from skills, sets, constellations (and more) that reduces DEF and RES  like 4 VV, Zhongli's Shield, Eula's E skill etc.</p>

                    <div class="calc-section">
                        <h5 style="text-align: center;">What are weapon procs?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;"><strong>Weapon procs</strong> are seperate triggered-effects bonuses from weapons. Examples of this is Prototype Archaic 240% ATK in an AOE, Dragonspine Spear Icicle, Snow-Tombed star silver icicle, etc. They don't count to your single-hit damage but counts to your total damage.</p>
                    <div class="calc-section">
                        <h5 style="text-align: center;">Missed something?</h5>
                    </div>
                    <p style="margin-left: 9px; margin-right: 9px;">You can add your own multiplier if you think we've missed something.</p>
                </div>
                <div class="main-page">
                    <h3 style="margin: 10px; text-align: center;">Genshin Damage Calculator</h3>
                    <h6 style="margin: 10px; text-align: center;">A genshin damage calculator based from this <a style="color: #4f4f75;"href="https://library.keqingmains.com/mechanics/combat/damage-formula">formula</a>.</h6>
                    <div class="total-damage-mobile" style="background: #1d1d1d; padding: 10px; margin: 10px;">
                        <h3 style="margin: 10px; text-align: center;">Total Damage:</h3>
                        <h1 style="margin: 10px; text-align: center;"><span id="total-damage-mobile"></span></h1>
                        <style>
                            h6 {
                                margin-bottom: 0;
                            }
                        </style>
                        <h6 style="text-align: center; color: #9292d3;">Made by Liqht#8961</h6>
                        <h6 style="text-align: center; margin: 10px;">To get the highest possible damage, snapshot your stats when you execute your usual team combo. This calculator is not <strong>100% accurate</strong>, damage may be off by a few hundreds.</h6>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <button class="btn btn-outline-secondary" type="button" id="button-addon2">Add a multiplier</button>
                        </div>
                    </div>
                    <div class="calc-section">
                        <h5 style="text-align: left;">Player Info <span style="color: rgb(226, 123, 123); font-size: 15px;">required to unlock other inputs</span></h5>
                        <div class="form-check form-switch">
                            <style>
                                .form-check-input {
                                    background-color: #3a3b3c; border-color: #242526;
                                }
                                .form-check-input:checked {
                                    border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;
                                }
                            </style>
                            <input class="form-check-input" type="checkbox" id="accuracy-switch" onclick="accuracyswitchcheck();">
                            <label class="form-check-label" for="accuracy-switch">Accuracy Mode</label>
                        </div>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="world-lvl-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                  World Level: <span id="world-lvl"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="world-lvl-dropdown">
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(1);">1</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(2);">2</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(3);">3</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(4);">4</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(5);">5</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(6);">6</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(7);">7</a></li>
                                  <li><a class="dropdown-item" onclick="increaseWorldLvl(8);">8</a></li>
                                </ul>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="char-lvl-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                    Character Level: <span id="char-lvl"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="char-lvl-dropdown">
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(10);">10</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(20);">20</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(30);">30</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(40);">40</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(50);">50</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(60);">60</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(70);">70</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(80);">80</a></li>
                                    <li><a class="dropdown-item" onclick="increaseCharLvl(90);">90</a></li>
                                </ul>
                            </div>
                            <div class="input-group" style="visibility: hidden;" id="enemy-accuracy-lvl">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Enemy Level</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="enemy-lvl">
                            </div>
                        </div>
                    </div>
                    <div class="calc-section">
                        <h5 style="text-align: left;">Character ATK Info</h5>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row">
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Base ATK</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="base-atk">
                            </div>
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Added ATK</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="added-atk">
                            </div>
                        </div>
                    </div>
                    <div class="calc-section">
                        <h5 style="text-align: left;">Multipliers <span class="text-muted">(Note: No need to input % sign)</span></h5>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row" style="margin: 5px 5px 0 5px;">
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Elem DMG Bonus%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="elem-dmg-bonus">
                            </div>
                            <div class="input-group" id="skill-multiplier">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Skill Multiplier%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="skill-multiplier-input">
                            </div>
                        </div>
                    </div>
                    <div class="calc-row-wrapper">
                        <div class="calc-row" style="margin: 0 5px 5px 5px;">
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Crit Rate%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="crit-rate">
                            </div>
                            <div class="input-group">
                                <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Crit DMG%</span>
                                <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="crit-dmg">
                            </div>
                        </div>
                    </div>
                    <div id="em-section">
                        <div class="calc-section">
                            <h5>Elemental Mastery</h5>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="transformative-switch" onclick="transformativeswitchcheck();">
                                <label class="form-check-label" for="transformative-switch">Include Transformative Reaction</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="vap-switch" onclick="vaporizemeltswitchcheck();">
                                <label class="form-check-label" for="vap-switch">Is using vaporize/melt</label>
                            </div>
                        </div>
                        <div class="calc-row-wrapper">
                            <div class="calc-row" style="margin: 5px 5px 0 5px;">
                                <div class="input-group">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Elemental Mastery</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="em-input">
                                </div>
                                <div class="input-group">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Reaction Bonus%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="reaction-bonus-multiplier">
                                </div>
                            </div>
                        </div>
                        <div class="calc-row-wrapper">
                            <div class="calc-row" style="margin: 0 5px 5px 5px;">
                                <div class="dropdown" id="vapmelt">
                                    <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="vapmelt-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                    Vaporize/Melt <span id="em-multiplier-label"></span>x
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="vapmelt-dropdown">
                                    <li><a class="dropdown-item" onclick="setEMBaseMultiplier(1)">1x</a></li>
                                    <li><a class="dropdown-item" onclick="setEMBaseMultiplier(1.5)">1.5x</a></li>
                                    <li><a class="dropdown-item" onclick="setEMBaseMultiplier(2)">2x</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown" id="transformative-reaction">
                                    <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="transformative-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                    Transformative Reaction 
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="transformative-dropdown">
                                    <li><a class="dropdown-item" href="#">Overloaded</a></li>
                                    <li><a class="dropdown-item" href="#">Shatter</a></li>
                                    <li><a class="dropdown-item" href="#">Electro Charged</a></li>
                                    <li><a class="dropdown-item" href="#">Swirl</a></li>
                                    <li><a class="dropdown-item" href="#">Superconduct</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="res-def-section">
                        <div class="calc-section">
                            <h5>RES / DEF Multipliers</h5>
                        </div>
                        <div clsas="calc-row-wrapper">
                            <div class="calc-row">
                                <div class="input-group" id="res-decrease">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">RES reduction%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="res-reduction">
                                </div>
                                <div class="input-group" id="def-decrease">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">DEF reduction%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="def-reduction">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="weapon-procs-section">
                        <div class="calc-section">
                            <h5>Weapon/Skill Procs</h5>
                        </div>
                        <div class="calc-row-wrapper">
                            <div class="calc-row">
                                <div class="input-group" id="weapon-procs">
                                    <span style="border-color: rgba(0,0,0,0); background-color: #4f4f75; color: #d5d6da;" class="input-group-text" id="inputGroup-sizing-default">Weapon Procs%</span>
                                    <input style="background-color: #232324; border-color: #242526; color: #d5d6da;" readonly type="text" class="form-control calc-locked" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                                </div>
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" style="border-color: #4f4f75; background-color: #4f4f75; color: #d5d6da;" type="button" id="weapon-procs-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                      Scales from...
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="weapon-procs-dropdown">
                                      <li><a class="dropdown-item" href="#">HP</a></li>
                                      <li><a class="dropdown-item" href="#">ATK</a></li>
                                      <li><a class="dropdown-item" href="#">DEF</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="calc-section" id="debug-console" style="margin-bottom: 9px;">
                        <style>
                            p {
                                margin-bottom: 0;
                            }
                        </style>
                        <h5>Debug Console</h5>
                        <p>worldLvl: <span id="world-lvl-debug"></span></p>
                        <p>charLvl: <span id="char-lvl-debug"></span></p>
                        <p>enemyLvl: <span id="enemylvl-debug"></span></p>
                        <p>resistance: <span id="res-debug"></span></p>
                        <p>resMultiplier: <span id="res-mult-debug"></span></p>
                        <p>defMultiplier: <span id="def-debug"></span></p>
                        <p>emMultiplier: <span id="em-mult-debug"></span></p>
                        <p>avgCrit: <span id="avgcrit-debug"></span></p>
                    </div>
                </div>
                <div class="padding-sm"></div>
            </div>
        </div>
    </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="js.js"></script>
    </body>
</html>